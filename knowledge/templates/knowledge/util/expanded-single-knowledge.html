{% load humanize %}

<div class="single-knowledge">
	<div class="subject">
		<h1>{{ knowledge.subject }}</h1>
	</div>

	{% if knowledge.summary %}
		<hr class='knowledge-part-divider'>
		<div class="summary">
			<h2>خلاصه :</h2>
			<p>{{ knowledge.summary }}</p>
		</div>
	{% endif %}

	{% if knowledge.content %}
		<hr class='knowledge-part-divider'>
		<div class="content">
			<h2>محتوا:</h2>
			<p>{{ knowledge.content }}</p>
		</div>
	{% endif %}

	{% if knowledge.file %}
		<hr class='knowledge-part-divider'>
		<div class="files">
			<h2>فایل ها:</h2>
			<p>{{ knowledge.file }}</p>
		</div>
	{% endif %}


	<hr class='knowledge-part-divider'>
	<footer class="footer">
		<div class="author triplet">نویسنده: <a href="">{{knowledge.author.realName}}</a></div>
		<div class="source triplet">منبع: <a href="">{{knowledge.source.subject}}</a></div>
		<div class="date triplet-base">تاریخ:{{knowledge.createDate}}</div>
	</footer> 


	<hr class='knowledge-part-divider'>
	<div class="control-panel-relation">
		<button type="button" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#add-relation">افزودن رابطه</button>

		{% for rel in knowledge.relationToKnowledge.all %}
			<div class='btn-group'>
				<!-- todo add  link -->
				<a class='btn btn-sm btn-success'>{{ rel.toKnowledge.presentation }}</a>
				<a class='btn btn-sm btn-success'>{{ rel.ktype.presentation }}</a>
				<a class='btn btn-sm btn-success'><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
			</div>
		{% endfor %}
		
		{% for rel in knowledge.relationFromKnowledge.all %}
			<div class='btn-group'>
				<!-- todo add  link -->
				<a class='btn btn-sm btn-warning'>{{ rel.fromKnowledge.presentation }}</a>
				<a class='btn btn-sm btn-warning'>{{ rel.ktype.presentation }}</a>
				<a class='btn btn-sm btn-warning'><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
			</div>
		{% endfor %}


		<!-- <button class="btn btn-primary"></button> -->
	</div>
	<hr class='knowledge-part-divider'>
	<div class="control-panel-tag">
		<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#add-tag">افزودن تگ</button>
		
		{% for tag in knowledge.tags.all %}
			<div class='btn-group'>
				<!-- todo add  link -->
				<a class='btn btn-info'>{{ tag.ktype.presentation }}</a>
				<a class='btn btn-info'><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
			</div>
		{% endfor %}
		<!-- <button class="btn btn-primary"></button> -->
	</div>

	<hr class='knowledge-part-divider'>
	<div class="interact">
		<div class="rate middle-wrap">
			<a href="#" class="btn btn-sm btn-danger rate-down">
				<span class="number">0</span>
				<span class="glyphicon glyphicon-thumbs-down"></span>
			</a>
			<a href="#" class="btn btn-sm btn-success rate-up">
				<span class="number">0</span>
				<span class="glyphicon glyphicon-thumbs-up"></span>
			</a>
		</div>
		<div class="input-group add-comment" dir="ltr">
			<input type="text" placeholder="نظر..." class="form-control comment-send-text" dir="rtl">
			<span class="input-group-btn">
				<button class="btn btn-primary comment-send-but" type="button">
					<i class="glyphicon glyphicon-send"></i>
				</button>
			 </span>
		</div>
	</div>


	<hr class='knowledge-part-divider'>
	<div class="comments">
		{% for comment in knowledge.comments.all %}
			{% if not forloop.first %}
				<hr class="comment-part-divider"/>
			{% endif %}
			<div class="comment" dir="rtl">
				<a href="" class="comment-author" dir="rtl">{{ comment.author.user.username }}:</a>
				<span class="comment-text"  dir="rtl">{{ comment.text }}</span>
				<span class="comment-date" >{{ comment.date|naturaltime }}</span>
			</div>
		{% endfor %}
	</div>
</div>